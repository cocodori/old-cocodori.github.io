---
layout: post
title: Graph
description:  
summary: 
tags: data-structure
minute: 3
---


# Graph

그래프는 vertex와 edge로 이루어진 자료구조다.
vertex간 관계를 표현하는 조직도라고 볼 수 있다. 이런 점에서 Tree는 일종의 Graph다.

하지만 Graph는 Tree와 달리 vertex마다 edge가 있을 수도 있고, 없을 수도 있다. 루트 노드와 부모 자식이라는 개념이 존재하지 않는다.

**Graph와 Tree**

|구분    |Graph             |Tree              |
|:------|:-----------------|:-----------------|
|정의	   |node와 그 node를 연결하는 간선edge을 하나로 모아놓은 자료구조|Graph의 한 종류. DAG(Directed Acyclic Graph, 방향성이 있는 비순환 그래프)의 한 종류|
|방향성|방향 그래프, 무방향 그래프 모두 존재|방향 그래프|
|사이클|사이클 가능. 자체 간선self-loop도 가능. 순환 그래프cycle, 비순환 그래프acyclic 모두 존재.|사이클 불가능. self-loop도 불가능. 비순환 그래프|
|루트 노트|루트 노드의 개념이 없음|한 개의 루트 노드만 존재. 한 개의 노드만 존재. 모든 자식 노드는 한 개의 부모 노드만을 가짐|
|모델|네트워크 모델|계층 모델|
|순회|BFS, DFS| DFS, BFS안의 Pre-, In-, Post-order|
|간선 수|그래프에 따라 다르며 없을 수도 있음| N개의 노드라면 N-1개 |
|경로|-|임의의 두 노드 간의 경로는 유일|
|예시 및 종류|지도, 지하철 노선도의 최단 경로, 전기 회로의 소자, 도로|이진 트리, 이진 탐색 트리, 균형 트리, 이진 힙 등|


참고
- 오일러 경로(Eulerian tour):

	- 그래프에 존재하는 모든 간선edge을 한 번만 통과하면 처음 정점vertex으로 돌아오는 경로를 말한다.
    
    - 그래프의 모든 정점에연결된 간선의 갯수가 짝수일 때만 오일러 경로가 존재한다.
 

## Graph 용어

- 정점(vertex): 위치라는 개념. node라고도 부름.
- 간선(edge): 위치 간의 관계. 즉, 노드를 연결하는 선. link/branch라고도 부름.
- 인접 정점(adjacent vertex): 간선에 의해 직접 연결된 정점
- 정점의 차수(degree): 무방향 그래프에서 하나의 정점에 인접한 정점의 수.
- 진입 차수(in-degree): 방향 그래프에 외부에서 오는 간선의 수
- 진출 차수(out-degree): 방향 그래프에서 외부로 향하는 간선의 수
- 경로 길이(path length): 경로를 구성하는 데 사용된 간선의 수
- 단순 경로(simple path): 경로 중에서 반복되는 정점이 없을 경우
- 사이클(cycle): 단순 경로의 시작 정점과 종료 정점이 동일한 경우

## Graph 특징
- 그래프는 네트워크 모델임.
- 2개 이상의 ㄱ여로가 가능.
- self-loop뿐 아니라 loop/circuit도 가능
- 루트 노드 개념 없음
- 부모-자식 관계 개념 없음
- 순회는 DFS 또는 BFS
- 그래프는 cycle or acyclic이 있음
- 그래프는 크게 방향 그래프와 무방향 그래프가 있음.
- 간선의 유무는 그래프에 따라 다름.

## Graph의 종류
### 무방향 그래프 vs. 방향 그래프

- 무방향 그래프Undirected Graph
	- 무방향 그래프의 간선은 간선을 통해서만 양방향으로 갈 수 있다.
    - 정점 A와 정점 B를 연결하는 간선은 (A, B)와 같이 정점의 쌍으로 표현한다.
    	- (A, B)는 (B, A)와 동일하다.

- 방향 그래프Directed Graph
	- 간선에 방향성이 존재하는 그래프
    - A -> B로만 갈 수 있는 간선은 <A,B>로 표시한다.
    	- <A,B>는 <B,A>와 다르다.
        
### 가중치 그래프
- 가중치 그래프Weighted Graph
	- 간선에 비용이나 가중치가 할당된 그래프
    - 네트워크라고도 한다.
    
### 연결 그래프 VS. 비연결 그래프
- 연결 그래프Connected Graph
	- 무방향 그래프에 있는 모든 정점쌍에 대해서 항상 경로가 존재하는 경우.

- 비연결 그래프Disconnected Graph
	- 무방향 그래프에서 특정 정점쌍 사이에 경로가 존재하지 않는 경우
    
### 사이클 VS. 비순환 그래프
- Cycle
	- 단순 경로simple path의 시작과 종료 정점이 동일한 경우

- Acylic graph
	- 사이클이 없는 그래프
    
### 완전 그래프
- 완전 그래프Completed Graph
	- 그래프에 속해 있는 모든 정점이 서로 연결되어 있는 그래프
    - 무방향 완전 그래프


## 그래프 구현 두 가지

### 1.인접 리스트(Adjaceny List)
인접 리스트로 그래프를 표현하는 것이 가장 일반적인 방법이다.

- 모든 노드를 인접 리스트에 저장한다. 즉, 각각 노드에 인접한 노드들을 리스트로 표시한다.
	- 배열과 배일의 각 인덱스마다 존재하는 또다른 리스트, 연결리스트를 이용해서 인접 리스트를 표현.
    
    ```
    0: 1
    1: 2
    2: 0, 3
    3: 2
    4: 6
    5: 4
    6: 5
    ```
    
    - 노드의 번호만 알면 이 번호를 배열의 인덱스로 하여 각 노드 리스트에 쉽게 접근할 수 있다.
    
- 무방향 그래프에서 (a,b) 간선은 두 번 저장된다.
	- 한 번은 a 노드에 인접한 간선을 저장하고, 다른 한 번은 b에 인접한 간선을 저장한다.
    - 노드의 수: N, 간선의 수: E인 무방향 그래프의 경우 N개의 리스트, N개의 배열, 2E개의 노드가 필요.
    
- 트리에선 특정 노드 하나(루트 노드)에서 다른 모든 노드로 접근이 가능하다.
- 그래프에서는 특정 노드에서 다른 모드로 접근이 가능하지는 않다.

```java
class Graph {
	public Node[] nodes;
}

class Node {
	public String name;
    public Node[] children;
}
```


## 인접 행렬(Adjacency Matrix)
인접 행렬은 NxN 불린 행렬(Boolean Matrix)로, matrix[i][j]가 true라면 i -> j로 간선이 있다는 뜻이다.

- 0과 1을 이용한 정수 매트릭스를 사용할 수도 있다.

```java
if(간선 (i, j)가 그래프에 존재)
	matrix[i][j] = 1;
else
	matrix[i][j] = 0;
```

- 노드의 개수가 N인 그래프를 인접 행렬로 표현
	- 간선의 수와 무관하게 항상 n^2개의 메모리 공간이 필요.
- 무방향 그래프를 인접 행렬로 표현한다면, 이 행렬은 대칭 행렬Symmetric Matrix이 된다.
	- 물론 방향 그래프는 대칭 행렬이 안될 수도 있다.
- 인접 리스트를 사용한 그래프 알고리즘들 또한 인접 행렬에서도 사용이 가능하다.
	- 하지만 인접 행렬은 효율성이 떨어진다.
    - 인접 리스트는 어떤 노드에 인접한 노드를 쉽게 찾을 수 있지만, 인접 행렬에서는 인접한 노드를 찾기 위해 모든 노드를 순회해야 함.
    

### 인접 리스트와 인접 행렬 중 선택 방법

- 인접 리스트
	- 그래프 내 적은 숫자 간선만을 가지는 희소 그래프(Sparse Graph)의 경우
    - 장점
    	- 어떤 노드에 인접한 노드를 쉽게 찾을 수 있다.
        - 그래프에 존재하는 모든 간선의 수는 O(N+E)안에 알 수 있다.
    - 단점
    	- 간선의 존재 여부와 정점의 차수: 정점 i의 리스트에 있는 노드의 차수, 즉 정점 차수만큼 시간이 필요.
        
- 인접 행렬
	- 그래프에 간선이 많이 존재하는 밀집 그래프Dense Graph의 경우
    - 장점
    	- 두 정점을 연결하는 간선의 존재 여부를(M[i][j])를 O(1) 안에 즉시 알 수 있다.
        - 정점의 차수는 O(N) 안에 알 수 있다.

	- 단점
    	- 어떤 노드에 인접한 노드를 찾기 위해 모든 노드를 순회해야 함.
        - 그래프에 존재하는 모든 간선의 수는 O(N^2) 안에 알 수 있다.
        

## 그래프의 탐색

### 1. 깊이 우선 탐색(DFS, Depth-First Search)

루트 노드 혹은 임의의 노드에서 시작해서 다음 분기로 넘어가기 전에 해당 분기를 완벽하게 탐색하는 방법
- 즉 넓게 탐색하기 전에 깊게 탐색하는 것.
- 사용하는 경우: 모든 노드를 방문하고자 하는 경우

### 2. 너비 우선 탐색(BFS, Breadth-First Search)
루트 노드 혹은 임의의 노드에서 시작해서 인접한 노드를 먼저 탐색하는 방법

- 깊게 탐색하기 전에 넓게 탐색하는 것
- 사용하는 경우: 두 노드 사이의 최단 경로 혹은 임의의 경로를 찾고 싶을 때 이 방법을 사용.

참고:
https://gmlwjd9405.github.io/2018/08/13/data-structure-graph.html